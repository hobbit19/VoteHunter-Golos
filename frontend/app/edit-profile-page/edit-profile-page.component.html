<link href="https://cdn.quilljs.com/1.0.0/quill.snow.css" rel="stylesheet">

<div class="block">
	<vh-main-nav></vh-main-nav>
	<div class="editProfilePage__content">
		<div class="editProfilePage__left">
			<form class="editProfile__form" (submit)="submit()" *ngIf='profile'>
			<h2 class="h2">Редактирование профиля</h2>
			<p class="desc paragraph">Заполните профайл создателя, создав первое отличное впечатление для сообщества</p>
			<div class="section">
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Ваше имя</div>
					</div>
					<div class="section__right">
						<input class="section__input" placeholder="Иван Кузнецов" name="name" [(ngModel)]="profile.name">
					</div>
				</div>
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Что будете публиковать?</div>
					</div>
					<div class="section__right">
						<input class="section__input" i18n-placeholder="" placeholder="Видео обзоры оборудования для майнига" name="about" [(ngModel)]="profile.about">
					</div>
				</div>
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Промо видео</div>
					</div>
					<div class="section__right">
						<input class="section__input" i18n-placeholder="" placeholder="https://www.youtube.com/watch?v=xxxxxxxx" name="promo_video" [(ngModel)]="profile.promo_video">
					</div>
				</div>
				<div class="section__row section__row_h_140">
					<div class="section__left">
						<div class="section__name">Текст</div>
					</div>
					<div class="section__right">
						<vh-wysiwyg (onContentChanged)="onTextChanged($event)" [ops]="profile.contents?.ops ? profile.contents.ops : [ { insert: 'Hello ' }, { insert: 'World!', attributes: { bold: true } },  { insert: '\n' } ]"></vh-wysiwyg>
					</div>
				</div>

				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Изображение профиля</div>
					</div>
					<div class="section__right">
						<label class="editProfilePage__avatar" [style.background-image]="'url(' + (profile.profile_image || '/images/ava_placeholder.svg') + ')'" id="new_profile_image">
							<input class="input-file" type="file" name="new_profile_image"  (change)="onAvaInputChange($event)">
						</label>
					</div>
				</div>
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Изображение обложки <br>(1600 x 400)</div>
					</div>
					<div class="section__right">
						<label class="editProfilePage__image" [style.background-image]="'url(' + (profile.cover_image || '/images/camera.svg') + ')'" [style.background-size]="profile.cover_image? 'cover': 'auto'" id="new_cover_image">
							<input class="input-file" type="file" name="new_cover_image" (change)="onCoverInputChange($event)">
						</label>
					</div>
				</div>
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Изображение в списке</div>
					</div>
					<div class="section__right">
						<label class="editProfilePage__image" [style.background-image]="'url(' + (profile.list_image || '/images/camera.svg') + ')'" [style.background-size]="profile.list_image? 'cover': 'auto'" id="new_list_image">
							<input class="input-file" type="file" name="new_list_image" (change)="onListInputChange($event)">
						</label>
					</div>
				</div>
			</div>
			<div class="section">
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Категория</div>
					</div>
					<div class="section__right">
						<vh-dropdown [title]="selectedCategory?.name" tabindex="1">
							<vh-dropdown-option *ngFor="let category of categories" (click)="selectedCategory = category" [innerHTML]="category.name"></vh-dropdown-option>
						</vh-dropdown>
					</div>
				</div>
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">URL-адрес профайла</div>
					</div>
					<div class="section__right">
						<span class="section__fixedStr">yousource.io/</span>
						<input class="section__input" name="url" [(ngModel)]="profile.url">
					</div>
				</div>
			</div>
			<div class="section">
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">VK</div>
					</div>
					<div class="section__right">
						<input class="section__input" i18n-placeholder="" placeholder="Ваш аккаунт">
					</div>
				</div>
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">YouTube</div>
					</div>
					<div class="section__right">
						<input class="section__input" i18n-placeholder="" placeholder="Ваш аккаунт">
					</div>
				</div>
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Twitch</div>
					</div>
					<div class="section__right">
						<input class="section__input" i18n-placeholder="" placeholder="Ваш аккаунт">
					</div>
				</div>
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Facebook</div>
					</div>
					<div class="section__right">
						<input class="section__input" i18n-placeholder="" placeholder="Ваш аккаунт">
					</div>
				</div>
			</div>
			<div class="buttons">
				<button class="button button-mode-2">Сохранить</button>
			</div>
			</form>
		</div>
		<div class="editProfilePage__right">
			<form class="editGoal__form" (submit)="submitGoals()" *ngIf='goals'>
				<h2 class="h2" i18n="">Goal</h2>
				<p class="desc paragraph">Сообщите сообществу каковы будут ваши действия при достижении определенной цели</p>
				<div class="section">
					<div class="section__row">
						<div class="section__left">
							<div class="section__name">Кол-во голосов</div>
						</div>
						<div class="section__right">
							<input class="section__input" type="number" value="0" name="goal.amount" [(ngModel)]="goals[0].amount">
						</div>
					</div>
					<div class="section__row">
						<textarea class="section__textarea" i18n-placeholder="" placeholder="Когда я наберу 1000 голосов, я смогу создавать 2 видео в неделю вместо одного" [(ngModel)]="goals[0].goal" name="goal.goal"></textarea>
					</div>
					<div class="section__basket"></div>
				</div>
				<div class="buttons">
					<button class="button button-mode-2 editProfilePage__button">Сохранить</button>
				</div>
			</form>
			<h2 class="h2 editProfilePage__heading1">Вознаграждения</h2>
			<p class="desc paragraph">Сообщите сообществу каковы будут ваши вознаграждения для тех, кто больше всего поддерживает вас в творчестве</p>

			<div *ngFor="let reward of rewards ; let i = index">
			<form class="editGoal__form">
			<div class="section">
				<div class="section__row">
					<div class="section__left">
						<div class="section__name">Кол-во голосов</div>
					</div>
					<div class="section__right">
						<input class="section__input" type="number" value="0" name="amount" [(ngModel)]="rewards[i].amount">
					</div>
				</div>
				<div class="section__row">
					<textarea class="section__textarea" i18n-placeholder="" placeholder="Для Вас я смогу передать привет в следующем видео" [(ngModel)]="rewards[i].reward" name="reward"></textarea>
				</div>
				<div class="section__basket"  (click)="delReward(i);"></div>
			</div>
			<div class="buttons">
				<button class="button button-mode-2 editProfilePage__button" (click)="submitReward(i)">Сохранить</button>
				<button class="button button-mode-4 editProfilePage__button" (click)="addReward()">Добавить ещё</button>
			</div>
			</form>
			</div>
		</div>
	</div>
</div>
